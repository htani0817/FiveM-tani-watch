<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tani Watch</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- URL入力画面 -->
    <div id="input-container" class="hidden">
        <div class="input-wrapper">
            <div class="input-header">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    <span>Tani Watch</span>
                </div>
                <button class="close-btn" id="input-close-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <div class="input-body">
                <p class="input-description">YouTube または Twitch のURLを貼り付けてください</p>
                
                <div class="url-input-group">
                    <div class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                        </svg>
                    </div>
                    <input type="text" 
                           id="url-input" 
                           placeholder="https://www.youtube.com/watch?v=... or https://www.twitch.tv/..." 
                           autocomplete="off"
                           spellcheck="false">
                    <button class="paste-btn" id="paste-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>

                <p class="error-message hidden" id="error-message"></p>

                <div class="supported-platforms">
                    <div class="platform-item youtube">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                        <span>YouTube</span>
                    </div>
                    <div class="platform-item twitch">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
                        </svg>
                        <span>Twitch</span>
                    </div>
                </div>

                <div class="button-group">
                    <button class="play-btn" id="play-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                        <span>再生</span>
                    </button>
                    <button class="share-btn" id="share-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <span>画面共有</span>
                    </button>
                </div>

                <!-- 付近のプレイヤーリスト -->
                <div class="player-list-container hidden" id="player-list-container">
                    <div class="player-list-header">
                        <span>付近のプレイヤー</span>
                        <span class="player-count" id="player-count">0人</span>
                    </div>
                    <div class="player-list" id="player-list">
                        <div class="no-players">付近にプレイヤーがいません</div>
                    </div>
                    <button class="share-confirm-btn" id="share-confirm-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13"></path>
                            <path d="M22 2L15 22L11 13L2 9L22 2Z"></path>
                        </svg>
                        <span>選択したプレイヤーに共有</span>
                    </button>
                </div>
            </div>

            <div class="input-footer">
                <kbd>ESC</kbd>
                <span>で閉じる</span>
            </div>
        </div>
    </div>

    <!-- ビデオプレイヤー画面（コントロールのみ、動画はDUIで表示） -->
    <div id="player-container" class="hidden">
        <div class="player-controls-overlay">
            <div class="player-header">
                <div class="header-left">
                    <span class="platform-badge" id="platform-badge">YouTube</span>
                </div>
                <div class="header-right">
                    <button class="back-btn" id="back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        <span>戻る</span>
                    </button>
                    <button class="close-btn" id="player-close-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="controls-panel">
                <div class="volume-control">
                    <button class="volume-btn" id="volume-btn">
                        <svg id="volume-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                        </svg>
                    </button>
                    <div class="volume-slider-container">
                        <input type="range" 
                               id="volume-slider" 
                               min="0" 
                               max="100" 
                               value="50" 
                               class="volume-slider">
                        <div class="volume-fill" id="volume-fill"></div>
                    </div>
                    <span class="volume-value" id="volume-value">50%</span>
                </div>

                <div class="controls-right">
                    <div class="hint">
                        <kbd>ESC</kbd>
                        <span>で閉じる</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
